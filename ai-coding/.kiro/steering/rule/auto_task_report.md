---
inclusion: always
---
# 任务报告自动规则

## 适用场景

当你执行以下任何操作时，本规则自动生效：
- 当执行任务完成时

## 自动规则

###  规则1

- 自动撰写任务结果报告文件到specs目录下的`report/task_report_{任务序号}.md`

###  规则2
- 当代码文件更新后，执行以下操作（如果是测试代码文件则直接忽略）：
  1. 提取文件中所有的类定义和函数定义
  2. 记录每个类的：
  - 类名
  - 继承关系
  - 主要方法列表
  - 类的用途说明
  3. 记录每个函数的：
  - 函数名
  - 参数列表（包括类型注解）
  - 返回类型   
  - 函数用途简述
  4. 将提取的信息按以下格式更新到specs目录下的`report/funcs_{代码文件扩展名}.md`文件中，文件不存在则创建，如果存在则更新对应文件的部分：
  
  ```markdown
  ## 文件：{文件路径}
  
  ### 类定义   
  - **类名**: 用途说明     
  - 方法: 
    - method1(参数) : 返回类型 - 用途说明
    - method2(参数) : 返回类型 - 用途说明
  
  ### 函数定义   
  - **函数名(参数)**: 返回类型 - 用途说明
  ```
  5. 保持文件按模块路径排序，便于查找
  6. 添加最后更新时间，确保提取的信息准确完整，并遵循项目的文档规范。

### 规则3：完成确认

生成完成后，你必须输出：

```
✓ report报告文件生成完毕
```
## 执行顺序

1. 先执行规则1
2. 然后执行规则2
3. 最后输出完成确认

## 重要提醒

这不是建议，是强制要求。每次处理任务结束时都必须完成这些步骤。
  